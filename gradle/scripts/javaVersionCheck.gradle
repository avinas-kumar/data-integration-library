// Copyright 2021 LinkedIn Corporation. All rights reserved.
// Licensed under the BSD-2 Clause license.
// See LICENSE in the project root for license information.

gradle.taskGraph.whenReady {
   gradle.taskGraph.allTasks.each { task ->
        def taskProject = task.project
        if (taskProject.hasProperty('requiresJavaVersion') && !taskProject.requiresJavaVersion.equals(javaVersion)) {
            logger.warn("WARNING: Project {} requires Java version {} which conflicts with build version {}. COMPILATION DISABLED. Please use -PjdkVersion={} .",
                  taskProject.name,
                  taskProject.requiresJavaVersion,
                  javaVersion,
                  taskProject.requiresJavaVersion)
            task.onlyIf { false }
          }
   }
}